/*! For license information please see 336.ff56ccb5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpresidente_2026=self.webpackChunkpresidente_2026||[]).push([[336],{2382:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2580:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},4459:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4918:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},5346:(e,a,s)=>{s.d(a,{A:()=>m});var t=s(5043),n=s(7784);const l=(0,n.A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var i=s(4459),r=s(9698);const c=(0,n.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var o=s(2267),d=s(579);const m=e=>{let{onAuthChange:a}=e;const[s,n]=(0,t.useState)(null),[m,x]=(0,t.useState)(!0),[h,u]=(0,t.useState)(!0),[p,g]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("authToken",e),window.history.replaceState({},document.title,window.location.pathname)),j()},[]);const j=async()=>{try{x(!0);const e=localStorage.getItem("authToken");if(!e)return n(null),void(a&&a(null));const s=await fetch("/api/auth/user",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){const e=await s.json();n(e),a&&a(e)}else 401===s.status&&(localStorage.removeItem("authToken"),n(null),a&&a(null))}catch(p){localStorage.removeItem("authToken"),g("Error de conexi\xf3n")}finally{x(!1)}},b=()=>{localStorage.removeItem("authToken"),n(null),a&&a(null),window.location.reload()};return m?(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,d.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),(0,d.jsx)("span",{className:"text-sm",children:"Verificando..."})]}):p&&!h?(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-amber-600 bg-amber-50 px-3 py-2 rounded-lg",children:[(0,d.jsx)(l,{className:"w-4 h-4"}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("div",{className:"font-medium",children:"OAuth en configuraci\xf3n"}),(0,d.jsx)("div",{className:"text-xs",children:"Participaci\xf3n disponible sin login"})]})]}):s?(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[s.avatar?(0,d.jsx)("img",{src:s.avatar,alt:s.nombre,className:"w-8 h-8 rounded-full"}):(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center",children:(0,d.jsx)(i.A,{className:"w-4 h-4 text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:s.nombre}),(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:[s.consultasEnviadas," consultas"]})]})]}),(0,d.jsx)("button",{onClick:b,className:"text-xs text-red-600 hover:text-red-700 transition-colors",children:"Salir"})]}):(0,d.jsx)("div",{className:"flex items-center space-x-2",children:h?(0,d.jsxs)("button",{onClick:async()=>{try{const e=(0,o.KB)("/api/auth/google"),a=await fetch("/api/auth/google",{method:"GET",credentials:"include"});if(503===a.status){const e=await a.json();return u(!1),void g(e.message)}window.location.href=e}catch(p){g("Error iniciando sesi\xf3n"),u(!1)}},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,d.jsx)(r.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-sm",children:"Iniciar Sesi\xf3n"})]}):(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,d.jsx)(c,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-sm",children:"Login en configuraci\xf3n"})]})})}},6336:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var t=s(2555),n=s(5043),l=s(1283),i=s(3658),r=s(2580),c=s(2382),o=s(4459),d=s(8006),m=s(9350),x=s(4918);const h=(0,s(7784).A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var u=s(4669),p=s(9698),g=s(9809),j=s(5346),b=s(3539),f=s(4633),v=s(5157),N=s(579);const w=()=>{const[e,a]=(0,n.useState)([]),[s,w]=(0,n.useState)(!0),[y,A]=(0,n.useState)({tema:"todos",region:"todas",page:1}),[k,C]=(0,n.useState)({total:0,implementadas:0,enRevision:0}),[S,I]=(0,n.useState)(null),[T,E]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{R(),q(),z()},[y]);const R=async()=>{try{const e=localStorage.getItem("authToken");if(!e)return void I(null);const a=await fetch("/api/auth/user",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(a.ok){const e=await a.json();I(e)}else 401===a.status&&(localStorage.removeItem("authToken"),I(null))}catch(e){}},q=async()=>{try{w(!0);const e=new URLSearchParams((0,t.A)((0,t.A)({page:y.page,limit:12},"todos"!==y.tema&&{tema:y.tema}),"todas"!==y.region&&{region:y.region})),s=await fetch("/api/consultas/public?".concat(e)),n=await s.json();1===y.page?a(n.consultas||[]):a(e=>[...e,...n.consultas||[]])}catch(e){}finally{w(!1)}},z=async()=>{try{const e=await fetch("/api/consultas/stats"),a=await e.json();C(a)}catch(e){}},P=e=>{const a=new Date,s=new Date(e),t=a-s,n=Math.floor(t/36e5),l=Math.floor(n/24);return n<1?"Hace menos de 1 hora":n<24?"Hace ".concat(n," hora").concat(n>1?"s":""):l<7?"Hace ".concat(l," d\xeda").concat(l>1?"s":""):s.toLocaleDateString("es-CL")},D=v.z.participacionCiudadana;return(0,N.jsxs)(g.A,{config:D,children:[(0,N.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:[(0,N.jsx)("header",{className:"hidden lg:block bg-white/90 backdrop-blur-md shadow-lg sticky top-0 z-40",children:(0,N.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,N.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,N.jsxs)(l.N_,{to:"/",className:"flex items-center space-x-3",children:[(0,N.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-green-600 rounded-full flex items-center justify-center",children:(0,N.jsx)(i.A,{className:"w-6 h-6 text-white"})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Participaci\xf3n Ciudadana"}),(0,N.jsx)("p",{className:"text-sm text-gray-600",children:"Melinao 2026"})]})]}),(0,N.jsx)(j.A,{onAuthChange:I})]})})}),(0,N.jsx)("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:(0,N.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,N.jsxs)("h2",{className:"text-4xl sm:text-5xl font-black text-gray-900 mb-6",children:["Tu Voz ",(0,N.jsx)("span",{className:"text-blue-600",children:"Construye"})," Chile"]}),(0,N.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Participa activamente en la construcci\xf3n de las propuestas que transformar\xe1n nuestro pa\xeds"}),(0,N.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 max-w-2xl mx-auto",children:[(0,N.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[(0,N.jsx)("div",{className:"text-3xl font-black text-blue-600 mb-2",children:k.total}),(0,N.jsx)("div",{className:"text-sm text-gray-600",children:"Consultas Ciudadanas"})]}),(0,N.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[(0,N.jsx)("div",{className:"text-3xl font-black text-green-600 mb-2",children:k.implementadas}),(0,N.jsx)("div",{className:"text-sm text-gray-600",children:"Implementadas"})]}),(0,N.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[(0,N.jsx)("div",{className:"text-3xl font-black text-orange-600 mb-2",children:k.enRevision}),(0,N.jsx)("div",{className:"text-sm text-gray-600",children:"En Revisi\xf3n"})]})]})]})}),e.some(e=>"implementada"===e.estado)&&(0,N.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-emerald-50 to-green-50",children:(0,N.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,N.jsxs)("div",{className:"text-center mb-8",children:[(0,N.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"\ud83c\udfaf Consultas Implementadas"}),(0,N.jsx)("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Estas son las consultas ciudadanas que ya se han convertido en acciones concretas. Tu voz cuenta y genera cambios reales."})]}),(0,N.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.filter(e=>"implementada"===e.estado).slice(0,6).map(e=>(0,N.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow border-2 border-emerald-200",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,N.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,N.jsx)("div",{className:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center",children:(0,N.jsx)("span",{className:"text-white text-sm",children:"\u2713"})}),(0,N.jsx)("span",{className:"font-semibold text-emerald-700",children:"Implementada"})]}),(0,N.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:e.tema})]}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("p",{className:"text-gray-700 text-sm line-clamp-3 mb-3",children:e.mensaje}),e.descripcionImplementacion&&(0,N.jsxs)("div",{className:"p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:[(0,N.jsx)("p",{className:"text-emerald-700 text-sm font-medium mb-1",children:"\ud83c\udfaf Implementaci\xf3n:"}),(0,N.jsx)("p",{className:"text-emerald-600 text-sm",children:e.descripcionImplementacion})]})]}),(0,N.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,N.jsx)("span",{children:e.region}),e.fechaImplementacion&&(0,N.jsx)("span",{children:new Date(e.fechaImplementacion).toLocaleDateString("es-ES",{month:"short",year:"numeric"})})]})]},e._id))}),e.filter(e=>"implementada"===e.estado).length>6&&(0,N.jsx)("div",{className:"text-center mt-8",children:(0,N.jsxs)("button",{onClick:()=>A(e=>(0,t.A)((0,t.A)({},e),{},{estado:"implementada"})),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors",children:["Ver todas las implementadas (",e.filter(e=>"implementada"===e.estado).length,")"]})})]})}),(0,N.jsx)("section",{className:"py-8 px-4 sm:px-6 lg:px-8 bg-white/50",children:(0,N.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,N.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,N.jsxs)("button",{onClick:()=>E(!T),className:"flex items-center space-x-2 bg-white rounded-lg px-4 py-2 shadow-md hover:shadow-lg transition-shadow",children:[(0,N.jsx)(r.A,{className:"w-4 h-4"}),(0,N.jsx)("span",{children:"Filtros"}),(0,N.jsx)(c.A,{className:"w-4 h-4 transition-transform ".concat(T?"rotate-180":"")})]}),T&&(0,N.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[(0,N.jsx)("select",{value:y.tema,onChange:e=>A(a=>(0,t.A)((0,t.A)({},a),{},{tema:e.target.value,page:1})),className:"bg-white rounded-lg px-4 py-2 shadow-md border border-gray-200 focus:ring-2 focus:ring-blue-500",children:[{id:"todos",name:"Todos los temas"},{id:"general",name:"General"},{id:"economia",name:"Econom\xeda"},{id:"ia",name:"Inteligencia Artificial"},{id:"seguridad",name:"Seguridad"},{id:"justicia",name:"Justicia"},{id:"unidad",name:"Unidad Nacional"}].map(e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,N.jsx)("select",{value:y.region,onChange:e=>A(a=>(0,t.A)((0,t.A)({},a),{},{region:e.target.value,page:1})),className:"bg-white rounded-lg px-4 py-2 shadow-md border border-gray-200 focus:ring-2 focus:ring-blue-500",children:[{id:"todas",name:"Todas las regiones"},{id:"Arica y Parinacota",name:"Arica y Parinacota"},{id:"Tarapac\xe1",name:"Tarapac\xe1"},{id:"Antofagasta",name:"Antofagasta"},{id:"Atacama",name:"Atacama"},{id:"Coquimbo",name:"Coquimbo"},{id:"Valpara\xedso",name:"Valpara\xedso"},{id:"Metropolitana",name:"Regi\xf3n Metropolitana"},{id:"O'Higgins",name:"O'Higgins"},{id:"Maule",name:"Maule"},{id:"\xd1uble",name:"\xd1uble"},{id:"Biob\xedo",name:"Biob\xedo"},{id:"La Araucan\xeda",name:"La Araucan\xeda"},{id:"Los R\xedos",name:"Los R\xedos"},{id:"Los Lagos",name:"Los Lagos"},{id:"Ays\xe9n",name:"Ays\xe9n"},{id:"Magallanes",name:"Magallanes"}].map(e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,N.jsxs)("select",{value:y.estado||"",onChange:e=>A(a=>(0,t.A)((0,t.A)({},a),{},{estado:e.target.value,page:1})),className:"bg-white rounded-lg px-4 py-2 shadow-md border border-gray-200 focus:ring-2 focus:ring-blue-500",children:[(0,N.jsx)("option",{value:"",children:"Todos los estados"}),(0,N.jsx)("option",{value:"pendiente",children:"\ud83d\udccb Pendientes"}),(0,N.jsx)("option",{value:"revisando",children:"\ud83d\udd0d En revisi\xf3n"}),(0,N.jsx)("option",{value:"implementada",children:"\u2705 Implementadas"}),(0,N.jsx)("option",{value:"respondida",children:"\ud83d\udcac Respondidas"}),(0,N.jsx)("option",{value:"rechazada",children:"\u274c Rechazadas"})]})]})]})})}),(0,N.jsx)("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:(0,N.jsxs)("div",{className:"max-w-7xl mx-auto",children:[s&&0===e.length?(0,N.jsxs)("div",{className:"text-center py-12",children:[(0,N.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,N.jsx)("p",{className:"text-gray-600 mt-4",children:"Cargando consultas ciudadanas..."})]}):(0,N.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var s;return(0,N.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,N.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,N.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,N.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center",children:(0,N.jsx)(o.A,{className:"w-5 h-5 text-white"})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"font-semibold text-gray-900",children:(null===(s=e.usuario)||void 0===s?void 0:s.nombre)||"Ciudadano An\xf3nimo"}),(0,N.jsx)("div",{className:"text-xs text-gray-500",children:P(e.fechaPublicacion)})]})]}),(0,N.jsxs)("div",{className:"flex space-x-1",children:[(0,N.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("economia"===e.tema?"bg-green-100 text-green-800":"ia"===e.tema?"bg-purple-100 text-purple-800":"seguridad"===e.tema?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.tema}),"implementada"===e.estado&&(0,N.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 border border-emerald-200",children:"\u2705 Implementada"}),"revisando"===e.estado&&(0,N.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"\ud83d\udd0d En Revisi\xf3n"}),"respondida"===e.estado&&(0,N.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:"\ud83d\udcac Respondida"})]})]}),(0,N.jsx)("div",{className:"mb-4",children:(0,N.jsx)("p",{className:"text-gray-700 line-clamp-4",children:e.mensaje})}),"implementada"===e.estado&&(0,N.jsxs)("div",{className:"mb-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:[(0,N.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,N.jsx)("span",{className:"text-emerald-600 font-semibold text-sm",children:"\ud83c\udfaf Implementaci\xf3n Exitosa"})}),e.descripcionImplementacion&&(0,N.jsx)("p",{className:"text-sm text-emerald-700 mb-2",children:e.descripcionImplementacion}),e.fechaImplementacion&&(0,N.jsxs)("p",{className:"text-xs text-emerald-600",children:["Implementada el ",new Date(e.fechaImplementacion).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})]})]}),e.respuesta&&(0,N.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,N.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,N.jsx)("span",{className:"text-blue-600 font-semibold text-sm",children:"\ud83d\udcac Respuesta Oficial"})}),(0,N.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:e.respuesta.mensaje}),(0,N.jsxs)("p",{className:"text-xs text-blue-600",children:["Por ",e.respuesta.autor," - ",new Date(e.respuesta.fecha).toLocaleDateString("es-ES")]})]}),(0,N.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,N.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,N.jsx)(d.A,{className:"w-3 h-3"}),(0,N.jsx)("span",{children:e.region})]}),(0,N.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,N.jsx)(m.A,{className:"w-3 h-3"}),(0,N.jsx)("span",{children:e.tipoConsulta})]})]}),(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsxs)("button",{onClick:()=>(async e=>{if(S)try{const s=localStorage.getItem("authToken");if(!s)return void await f.A.sessionExpired();const n=await fetch("/api/consultas/".concat(e,"/like"),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});if(n.ok){const s=await n.json();a(a=>a.map(a=>a._id===e?(0,t.A)((0,t.A)({},a),{},{likes:s.totalLikes}):a)),f.A.toast("success","\xa1Like agregado!")}else 401===n.status&&(localStorage.removeItem("authToken"),I(null),await f.A.sessionExpired())}catch(s){await f.A.networkError()}else await f.A.info("Iniciar Sesi\xf3n","Debes iniciar sesi\xf3n para dar like a las consultas")})(e._id),className:"flex items-center space-x-1 text-pink-600 hover:text-pink-700 transition-colors",children:[(0,N.jsx)(x.A,{className:"w-4 h-4"}),(0,N.jsx)("span",{children:e.likes||0})]}),S&&(0,N.jsxs)("button",{onClick:()=>(async e=>{if(S)try{const a=await f.A.confirmReport();if(!a.isConfirmed||!a.value)return;const s=a.value.trim(),t=localStorage.getItem("authToken");if(!t)return void await f.A.sessionExpired();f.A.loading("Enviando reporte...");const n=await fetch("/api/consultas/".concat(e,"/report"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({motivo:s})});f.A.close(),n.ok?await f.A.success("Reporte Enviado","Gracias por ayudarnos a mantener una comunidad saludable.",{autoClose:!0}):401===n.status?(localStorage.removeItem("authToken"),I(null),await f.A.sessionExpired()):await f.A.error("Error","Error enviando el reporte. Int\xe9ntalo nuevamente.")}catch(a){f.A.close(),await f.A.networkError()}else await f.A.info("Iniciar Sesi\xf3n","Debes iniciar sesi\xf3n para reportar consultas")})(e._id),className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700 transition-colors",children:[(0,N.jsx)(h,{className:"w-4 h-4"}),(0,N.jsx)("span",{className:"text-xs",children:"Reportar"})]})]})]},e._id)})}),e.length>0&&(0,N.jsx)("div",{className:"text-center mt-8",children:(0,N.jsx)("button",{onClick:()=>A(e=>(0,t.A)((0,t.A)({},e),{},{page:e.page+1})),disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"Cargando...":"Cargar M\xe1s Consultas"})})]})}),(0,N.jsx)("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-blue-600 to-green-600",children:(0,N.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,N.jsx)("h3",{className:"text-3xl font-bold text-white mb-4",children:"\xbfTienes una idea para mejorar Chile?"}),(0,N.jsx)("p",{className:"text-blue-100 mb-8",children:S?"Comparte tu propuesta y forma parte del cambio que necesita nuestro pa\xeds":"Inicia sesi\xf3n y comparte tu propuesta para formar parte del cambio que necesita nuestro pa\xeds"}),S?(0,N.jsxs)("button",{onClick:()=>M(!0),className:"inline-flex items-center space-x-2 bg-white text-blue-600 px-8 py-4 rounded-full font-bold hover:shadow-lg transition-all duration-300",children:[(0,N.jsx)(u.A,{className:"w-5 h-5"}),(0,N.jsx)("span",{children:"Participar Ahora"})]}):(0,N.jsxs)("button",{onClick:()=>{window.location.href="/api/auth/google"},className:"inline-flex items-center space-x-2 bg-white text-blue-600 px-8 py-4 rounded-full font-bold hover:shadow-lg transition-all duration-300",children:[(0,N.jsx)(p.A,{className:"w-5 h-5"}),(0,N.jsx)("span",{children:"Iniciar Sesi\xf3n para Participar"})]})]})})]}),(0,N.jsx)(b.A,{tema:"general",titulo:"Nueva Consulta Ciudadana",descripcion:"Comparte tu propuesta para formar parte del cambio que necesita nuestro pa\xeds",showStats:!1,isOpen:L,onClose:M,usuario:S})]})}},8006:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9350:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},9698:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]])}}]);
//# sourceMappingURL=336.ff56ccb5.chunk.js.map